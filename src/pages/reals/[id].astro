---
import { getReal, allFilmsByRealId } from "../../../backend/backend.mjs";
import Layout from "../../layouts/Layout.astro";
import Picture from "astro/components/Picture.astro";
import Carroussel from "../../components/Carroussel.astro";

const { id } = Astro.params;
const real = await getReal(id);
if(!real){
   return Astro.redirect('/reals');
};
const films = await allFilmsByRealId(id);

console.log(real);
---

<Layout titre = {real.Nom_R}>
    <a href="/reals">Retour Ã  la liste</a>
    <Picture pictureAttributes={{ class: "block rounded-t-lg overflow-hidden" }} inferSize={true} src=`https://vissport.pauldarlef.fr:443/api/files/${real.collectionId}/${real.id}/${real.Image_R}` alt={real.Nom_R} />
    <h1 class="text-4xl font-bold text-blue-800">{real.Nom_R}</h1>
    <h2>{real.Date_naissance_R}</h2>
    <div class="text-base" set:html={real.Bio_R}></div>

    <ul>
        {
            <Carroussel films={films} />
        }
    </ul>
</Layout>